var e;e=function(){var e=function(){var e=null;function t(t){if(!e||e.closed){if(!t){var n=document.querySelector('script[src$="notes.js"]').src;t=(n=n.replace(/notes\.js(\?.*)?$/,""))+"notes.html"}var a;(e=window.open(t,"reveal.js - Notes","width=1100,height=700"))?(a=setInterval((function(){e.postMessage(JSON.stringify({namespace:"reveal-notes",type:"connect",url:window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,state:Reveal.getState()}),"*")}),500),window.addEventListener("message",(function(t){var n,s,o,i,d=JSON.parse(t.data);d&&"reveal-notes"===d.namespace&&"connected"===d.type&&(clearInterval(a),Reveal.addEventListener("slidechanged",r),Reveal.addEventListener("fragmentshown",r),Reveal.addEventListener("fragmenthidden",r),Reveal.addEventListener("overviewhidden",r),Reveal.addEventListener("overviewshown",r),Reveal.addEventListener("paused",r),Reveal.addEventListener("resumed",r),r()),d&&"reveal-notes"===d.namespace&&"call"===d.type&&(n=d.methodName,s=d.arguments,o=d.callId,i=Reveal[n].apply(Reveal,s),e.postMessage(JSON.stringify({namespace:"reveal-notes",type:"return",result:i,callId:o}),"*"))}))):alert("Speaker view popup failed to open. Please make sure popups are allowed and reopen the speaker view.")}else e.focus();function r(t){var n=Reveal.getCurrentSlide(),a=n.querySelector("aside.notes"),r=n.querySelector(".current-fragment"),s={namespace:"reveal-notes",type:"state",notes:"",markdown:!1,whitespace:"normal",state:Reveal.getState()};if(n.hasAttribute("data-notes")&&(s.notes=n.getAttribute("data-notes"),s.whitespace="pre-wrap"),r){var o=r.querySelector("aside.notes");o?a=o:r.hasAttribute("data-notes")&&(s.notes=r.getAttribute("data-notes"),s.whitespace="pre-wrap",a=null)}a&&(s.notes=a.innerHTML,s.markdown="string"==typeof a.getAttribute("data-markdown")),e.postMessage(JSON.stringify(s),"*")}}return{init:function(){/receiver/i.test(window.location.search)||(null!==window.location.search.match(/(\?|\&)notes/gi)&&t(),Reveal.addKeyBinding({keyCode:83,key:"S",description:"Speaker notes view"},(function(){t()})))},open:t}}();Reveal.registerPlugin("notes",e)},"function"==typeof define&&define.amd?define(e):e();
